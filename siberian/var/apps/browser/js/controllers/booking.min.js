angular.module("starter").controller("BookingController",function($scope,$stateParams,Booking,Customer,Dialog,Loader){angular.extend($scope,{is_loading:!1,value_id:$stateParams.value_id,use_pull_refresh:!1,formData:{},people:[],card_design:!1}),Booking.setValueId($stateParams.value_id);for(var length=1;length<=20;)$scope.people.push(length),length+=1;$scope.loadContent=function(){$scope.is_loading=!0,Booking.findStores().then(function(data){$scope.populate(data),Customer.isLoggedIn()&&($scope.formData.name=Customer.customer.firstname+" "+Customer.customer.lastname,$scope.formData.email=Customer.customer.email)}).then(function(){$scope.is_loading=!1})},$scope.populate=function(data){$scope.stores=data.stores,$scope.page_title=data.page_title},$scope.clearForm=function(){$scope.formData={}},$scope.submitForm=function(){Loader.show(),Booking.submitForm($scope.formData).then(function(data){Dialog.alert("Success",data.message,"OK"),$scope.formData={}},function(data){Dialog.alert("Error",data.message,"OK")}).then(function(){Loader.hide()})},$scope.loadContent()});
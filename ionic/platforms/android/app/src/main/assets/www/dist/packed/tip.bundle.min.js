angular.module("starter").controller("TipController",function($scope,$stateParams,Tip){angular.extend($scope,{value_id:$stateParams.value_id,bill:{},format:null,card_design:!1}),Tip.setValueId($stateParams.value_id),$scope.loadContent=function(){Tip.findAll().then(function(data){$scope.page_title=data.page_title,$scope.format=data.format})},$scope.calculate=function(){if($scope.bill.amount&&$scope.bill.percent){var global=$scope.bill.amount*($scope.bill.percent/100);if($scope.global_tip=global.toFixed(2),$scope.bill.number<0&&($scope.bill.number=null),$scope.bill.number){var result=$scope.global_tip/$scope.bill.number;$scope.each_tip=result.toFixed(2),$scope.each_tip=$scope.format.replace(",00","").replace(".00","").replace("1",$scope.each_tip)}$scope.global_tip=$scope.format.replace(",00","").replace(".00","").replace("1",$scope.global_tip)}},$scope.loadContent()}),angular.module("starter").factory("Tip",function($pwaRequest){var factory={value_id:null,extendedOptions:{},setValueId:function(value_id){factory.value_id=value_id},setExtendedOptions:function(options){factory.extendedOptions=options},findAll:function(){this.value_id||$pwaRequest.reject("[Factory::Tip.findAll] missing factory.id");var payload=$pwaRequest.getPayloadForValueId(factory.value_id);return!1!==payload?$pwaRequest.resolve(payload):$pwaRequest.get("tip/mobile_view/findall",angular.extend({urlParams:{value_id:this.value_id}},factory.extendedOptions))}};return factory});